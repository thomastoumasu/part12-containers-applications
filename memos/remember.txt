script -r script-answers/exercise12_11.txt
exit
script -p script-answers/exercise12_8.txt

https://tkt-lapio.github.io/command-line/
shell or cd: home folder. pwd: see path from root folder. root is /. A path that starts with / is absolute, otherwise it is relative.
ls -la
mkdir
touch to create text file
cat, or head -n 10, or tail -n 10, to show contents of file
> to pipe into a file. > recreates, >> adds. curl url > text.txt
mv file.txt /targetfolder
&& to chain commands (second will not be executed if first fails)
sh to execute from file

Dockerfile specifies the image.
images includes the code, the dependencies and the instructions how to run the application. Images are immutable.
Docker build turns an image into a runtime instance of the image aka a container.
.dockerignore specifies files not to be copied into the image.
docker-compose.yml to automatize the image build, then run with docker compose up
-p : hostport:applicationport so 3010:3000 means 3000 from inside, localhost:3010 from outside

# build image named backend-dev from the dockerfile called dev.Dockerfile which is in this folder:
docker build -f dev.Dockerfile -t backend-dev . 

docker build -t frontend . 
docker build --target build-stage -t frontend . # to stop at the build stage
docker container run --name frontend --rm -p 5173:80 frontend
docker container run -it --name frontend --rm -p 5173:80 frontend bash 
docker container run --name frontend-dev -it --rm -p 5173:5173 -v "$(pwd):/usr/src/app/" frontend-dev bash

docker compose -f docker-compose.dev.yml up
docker compose -f docker-compose.dev.yml down --volumes
# and to rebuild the image:
docker compose up --build

# debug network: 
docker exec -it frontend bash   then wget http://mongo:27017 -O - or curl http://mongo:27017

docker builder prune -f
docker system prune -f
docker rm -vf $(docker ps -aq) && docker rmi -f $(docker images -aq) 
docker network prune -f